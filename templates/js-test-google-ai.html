
<script>
fetch('/stream')
  .then(response => {
    const reader = response.body.getReader();
    const decoder = new TextDecoder();

    function read() {
      reader.read().then(({ done, value }) => {
        if (done) {
          return;
        }

        const chunk = decoder.decode(value);
        const lines = chunk.split('\n');

        lines.forEach(line => {
          if (line) {
            const data = JSON.parse(line);
            console.log(data); // Process the JSON object
          }
        });

        read();
      });
    }

    read();
  });
</script>

<!--
# pure shit from google ai
@app.route('/stream')
async def stream_json():
    async def generate_data():
        for i in range(10):
            data = {'id': i, 'value': 'Hello from Quart!'}
            yield json.dumps(data) + '\n'
            await asyncio.sleep(1)  # Simulate some delay

    return generate_data(), 200, {'Content-Type': 'application/x-ndjson'}
-->