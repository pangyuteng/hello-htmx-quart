
<script>
fetch('/stream')
  .then(response => {
    const reader = response.body.getReader();
    const decoder = new TextDecoder();

    function read() {
      reader.read().then(({ done, value }) => {
        if (done) {
          return;
        }

        const chunk = decoder.decode(value);
        const lines = chunk.split('\n');

        lines.forEach(line => {
          if (line) {
            const data = JSON.parse(line);
            console.log(data); // Process the JSON object
          }
        });

        read();
      });
    }

    read();
  });
</script>